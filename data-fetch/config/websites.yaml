# Data-Fetch Website Configurations
# This file contains configurations for websites that have been set up for data extraction.

sites:
  # The Block - BTC and ETH Total Exchange Volume (7DMA)
  - id: theblock_btc_eth_volume_7dma
    name: "The Block - BTC/ETH Exchange Volume 7DMA"
    base_url: "https://www.theblock.co"
    page_url: "https://www.theblock.co/data/crypto-markets/spot/btc-and-eth-total-exchange-volume-7dma"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://www.theblock.co/api/charts/chart/crypto-markets/spot/btc-and-eth-total-exchange-volume-7dma"
      method: "GET"
      requires_auth: false
      headers: {}
    field_mappings:
      date: "Date"
      btc_volume_7dma: "BTC"
      eth_volume_7dma: "ETH"
    robots_policy:
      status: "UNKNOWN"
      last_checked: null
      override_approved: false
    metadata:
      created: "2024-01-15T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      notes: "7-day moving average of BTC and ETH total exchange volume"
    rate_limit: 2.0  # seconds between requests

  # CoinGecko - Exchange Volume (Public API)
  - id: coingecko_exchange_volume
    name: "CoinGecko - Exchange Volume"
    base_url: "https://api.coingecko.com"
    page_url: "https://www.coingecko.com/en/exchanges"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://api.coingecko.com/api/v3/exchanges"
      method: "GET"
      requires_auth: false
      headers:
        Accept: "application/json"
    field_mappings:
      id: "id"
      name: "name"
      volume_24h: "trade_volume_24h_btc"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2024-01-15T00:00:00Z"
      override_approved: false
    metadata:
      created: "2024-01-15T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      notes: "24-hour trading volume for top cryptocurrency exchanges"
    rate_limit: 1.0

  # CoinGecko - BTC Market Chart (Historical Data)
  - id: coingecko_btc_market_chart
    name: "CoinGecko - BTC Market Chart"
    base_url: "https://api.coingecko.com"
    page_url: "https://www.coingecko.com/en/coins/bitcoin"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=30"
      method: "GET"
      requires_auth: false
      headers:
        Accept: "application/json"
    field_mappings:
      prices: "prices"
      market_caps: "market_caps"
      total_volumes: "total_volumes"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2024-12-04T00:00:00Z"
      override_approved: false
    metadata:
      created: "2024-12-04T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      notes: "Historical Bitcoin market data including prices, market caps, and trading volumes"
    rate_limit: 1.0

  # Legacy CryptoCompare - Daily Exchange Volume (deprecated, use CoinDesk)
  - id: cryptocompare_exchange_volume
    name: "CryptoCompare - Daily Exchange Volume (Legacy)"
    base_url: "https://min-api.cryptocompare.com"
    page_url: "https://min-api.cryptocompare.com/data/exchange/histoday"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://min-api.cryptocompare.com/data/exchange/histoday?tsym=USD&limit=30"
      method: "GET"
      requires_auth: false
      headers:
        Accept: "application/json"
    field_mappings:
      date: "time"
      volume: "volume"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2024-01-15T00:00:00Z"
      override_approved: false
    metadata:
      created: "2024-01-15T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      notes: "Legacy daily exchange volume data (deprecated)"
    rate_limit: 0.5

  # Alpha Vantage - Company Overview
  - id: alphavantage_company_overview
    name: "Alpha Vantage - Company Overview"
    base_url: "https://www.alphavantage.co"
    page_url: "https://www.alphavantage.co/query?function=OVERVIEW&symbol=AAPL"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://www.alphavantage.co/query?function=OVERVIEW&symbol=AAPL"
      method: "GET"
      requires_auth: false
      headers:
        Accept: "application/json"
    field_mappings:
      Symbol: "Symbol"
      Name: "Name"
      MarketCapitalization: "MarketCapitalization"
      Sector: "Sector"
      Industry: "Industry"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2024-12-05T00:00:00Z"
      override_approved: false
    metadata:
      created: "2024-12-05T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
    rate_limit: 12.0  # seconds between requests (5 calls/minute for free tier)

  # Alpha Vantage - Top 20 Stocks by Market Cap
  - id: alphavantage_top_20_stocks
    name: "Alpha Vantage - Top 20 Stocks by Market Cap"
    base_url: "https://www.alphavantage.co"
    page_url: "https://www.alphavantage.co/query?function=OVERVIEW&symbol=AAPL"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://www.alphavantage.co/query?function=OVERVIEW"
      method: "GET"
      requires_auth: false
      headers:
        Accept: "application/json"
    field_mappings:
      Symbol: "Symbol"
      Name: "Name"
      MarketCapitalization: "MarketCapitalization"
      Sector: "Sector"
      Industry: "Industry"
      Price: "52WeekHigh"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2024-12-05T00:00:00Z"
      override_approved: false
    metadata:
      created: "2024-12-05T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
    rate_limit: 12.0  # seconds between requests (5 calls/minute for free tier)


  # Dune Analytics - ETH Staking: Total ETH Deposited
  - id: dune_eth_staking_total_deposited
    name: "Dune - ETH Staking: Total ETH Deposited"
    base_url: "https://dune.com"
    page_url: "https://dune.com/queries/2361452"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://api.dune.com/api/v1/query"
      method: "POST"
      requires_auth: true
      query_id: "2361452"  # Amount of ETH staked query
      max_poll_attempts: 30
      poll_interval: 2
      parameters: {}
    field_mappings:
      total_eth_deposited: "Total ETH Deposited"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2025-12-09T00:00:00Z"
      override_approved: false
    metadata:
      created: "2025-12-09T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      requires_subscription: false
      notes: "Query ID: 2361452. Fetches total ETH staked to consensus layer. Requires DUNE_API_KEY with Free tier (2500 credits)."
    rate_limit: 2.0
    auth_config:
      auth_type: "api_key"
      api_key_env: "DUNE_API_KEY"
      api_key_header: "x-dune-api-key"

  # Dune Analytics - ETH Staking: Validators and Depositors
  - id: dune_eth_staking_validators_depositors
    name: "Dune - ETH Staking: Validators & Depositors"
    base_url: "https://dune.com"
    page_url: "https://dune.com/queries/2361448"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://api.dune.com/api/v1/query"
      method: "POST"
      requires_auth: true
      query_id: "2361448"  # Validators and depositors query
      max_poll_attempts: 30
      poll_interval: 2
      parameters: {}
    field_mappings:
      total_validators: "Total Validators"
      distinct_depositor_addresses: "Distinct Depositor Addresses"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2025-12-09T00:00:00Z"
      override_approved: false
    metadata:
      created: "2025-12-09T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      requires_subscription: false
      notes: "Query ID: 2361448. Fetches total validators and distinct depositor addresses. Requires DUNE_API_KEY with Free tier (2500 credits)."
    rate_limit: 2.0
    auth_config:
      auth_type: "api_key"
      api_key_env: "DUNE_API_KEY"
      api_key_header: "x-dune-api-key"

  # Dune Analytics - ETH Staking Statistics (Combined - uses both queries)
  - id: dune_eth_staking
    name: "Dune - ETH Staking Statistics (Combined)"
    base_url: "https://dune.com"
    page_url: "https://dune.com/underfire/eth-staking-statistics"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://api.dune.com/api/v1/query"
      method: "POST"
      requires_auth: true
      query_id: "2361448"  # Primary query (validators/depositors), will fetch from both queries
      max_poll_attempts: 30
      poll_interval: 2
      parameters: {}
    field_mappings:
      total_eth_deposited: "Total ETH Deposited"
      total_validators: "Total Validators"
      distinct_depositor_addresses: "Distinct Depositor Addresses"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2025-12-09T00:00:00Z"
      override_approved: false
    metadata:
      created: "2025-12-09T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      requires_subscription: false
      notes: "Combined configuration. Fetches from query 2361448 (validators/depositors) and 2361452 (total ETH deposited). Requires DUNE_API_KEY with Free tier (2500 credits)."
    rate_limit: 2.0
    auth_config:
      auth_type: "api_key"
      api_key_env: "DUNE_API_KEY"
      api_key_header: "x-dune-api-key"
      api_key_format: "{key}"

  # FRED Market Sentiment Indicators
  # Consumer Confidence (US) - OECD composite indicator
  - id: fred_consumer_confidence
    name: "FRED - Consumer Confidence (US)"
    base_url: "https://api.stlouisfed.org"
    page_url: "https://fred.stlouisfed.org/series/USACSCICP02STSAM"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://api.stlouisfed.org/fred/series/observations"
      method: "GET"
      requires_auth: true
      series_id: "USACSCICP02STSAM"
      parameters:
        file_type: "json"
        limit: 1000
        sort_order: "desc"
    field_mappings:
      date: "date"
      value: "value"
      series_name: "Consumer Confidence (US)"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2025-12-10T00:00:00Z"
      override_approved: false
    metadata:
      created: "2025-12-10T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      requires_subscription: false
      notes: "OECD composite consumer confidence indicator (percentage balance)"
    rate_limit: 0.5  # 120 requests/min = 0.5 seconds between requests
    auth_config:
      auth_type: "api_key"
      api_key_env: "FRED_API_KEY"
      api_key_param: "api_key"  # FRED uses query parameter, not header

  # 10-Year Breakeven Inflation - Market-based CPI expectation
  - id: fred_10y_breakeven_inflation
    name: "FRED - 10-Year Breakeven Inflation"
    base_url: "https://api.stlouisfed.org"
    page_url: "https://fred.stlouisfed.org/series/T10YIE"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://api.stlouisfed.org/fred/series/observations"
      method: "GET"
      requires_auth: true
      series_id: "T10YIE"
      parameters:
        file_type: "json"
        limit: 1000
        sort_order: "desc"
    field_mappings:
      date: "date"
      value: "value"
      series_name: "10-Year Breakeven Inflation"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2025-12-10T00:00:00Z"
      override_approved: false
    metadata:
      created: "2025-12-10T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      requires_subscription: false
      notes: "Market-based CPI expectation (10-year Treasury Inflation-Protected Securities)"
    rate_limit: 0.5
    auth_config:
      auth_type: "api_key"
      api_key_env: "FRED_API_KEY"
      api_key_param: "api_key"

  # Consumer Sentiment Index - University of Michigan
  - id: fred_consumer_sentiment
    name: "FRED - Consumer Sentiment Index"
    base_url: "https://api.stlouisfed.org"
    page_url: "https://fred.stlouisfed.org/series/UMCSENT"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://api.stlouisfed.org/fred/series/observations"
      method: "GET"
      requires_auth: true
      series_id: "UMCSENT"
      parameters:
        file_type: "json"
        limit: 1000
        sort_order: "desc"
    field_mappings:
      date: "date"
      value: "value"
      series_name: "Consumer Sentiment Index"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2025-12-10T00:00:00Z"
      override_approved: false
    metadata:
      created: "2025-12-10T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      requires_subscription: false
      notes: "University of Michigan Consumer Sentiment Index (1966:Q1=100, NSA)"
    rate_limit: 0.5
    auth_config:
      auth_type: "api_key"
      api_key_env: "FRED_API_KEY"
      api_key_param: "api_key"

  # 5y5y Forward Inflation - 5-year inflation starting 5 years ahead
  - id: fred_5y5y_forward_inflation
    name: "FRED - 5y5y Forward Inflation"
    base_url: "https://api.stlouisfed.org"
    page_url: "https://fred.stlouisfed.org/series/T5YIFR"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://api.stlouisfed.org/fred/series/observations"
      method: "GET"
      requires_auth: true
      series_id: "T5YIFR"
      parameters:
        file_type: "json"
        limit: 1000
        sort_order: "desc"
    field_mappings:
      date: "date"
      value: "value"
      series_name: "5y5y Forward Inflation"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2025-12-10T00:00:00Z"
      override_approved: false
    metadata:
      created: "2025-12-10T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      requires_subscription: false
      notes: "5-year inflation starting 5 years ahead (forward inflation expectation)"
    rate_limit: 0.5
    auth_config:
      auth_type: "api_key"
      api_key_env: "FRED_API_KEY"
      api_key_param: "api_key"

  # OECD Consumer Confidence Amplitude Adjusted
  - id: fred_oecd_amplitude_adjusted
    name: "FRED - OECD Confidence Amplitude Adjusted"
    base_url: "https://api.stlouisfed.org"
    page_url: "https://fred.stlouisfed.org/series/CSCICP03USM665S"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://api.stlouisfed.org/fred/series/observations"
      method: "GET"
      requires_auth: true
      series_id: "CSCICP03USM665S"
      parameters:
        file_type: "json"
        limit: 1000
        sort_order: "desc"
    field_mappings:
      date: "date"
      value: "value"
      series_name: "OECD Confidence Amplitude Adjusted"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2025-12-10T00:00:00Z"
      override_approved: false
    metadata:
      created: "2025-12-10T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      requires_subscription: false
      notes: "OECD Consumer Confidence for United States Amplitude Adjusted"
    rate_limit: 0.5
    auth_config:
      auth_type: "api_key"
      api_key_env: "FRED_API_KEY"
      api_key_param: "api_key"

  # Cleveland Fed 1-Year Expected Inflation
  - id: fred_cleveland_1yr_inflation
    name: "FRED - 1-Year Expected Inflation"
    base_url: "https://api.stlouisfed.org"
    page_url: "https://fred.stlouisfed.org/series/EXPINF1YR"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://api.stlouisfed.org/fred/series/observations"
      method: "GET"
      requires_auth: true
      series_id: "EXPINF1YR"
      parameters:
        file_type: "json"
        limit: 1000
        sort_order: "desc"
    field_mappings:
      date: "date"
      value: "value"
      series_name: "1-Year Expected Inflation"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2025-12-10T00:00:00Z"
      override_approved: false
    metadata:
      created: "2025-12-10T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      requires_subscription: false
      notes: "Cleveland Fed 1-Year Expected Inflation (median)"
    rate_limit: 0.5
    auth_config:
      auth_type: "api_key"
      api_key_env: "FRED_API_KEY"
      api_key_param: "api_key"

  # Cleveland Fed 10-Year Expected Inflation
  - id: fred_cleveland_10yr_inflation
    name: "FRED - 10-Year Expected Inflation"
    base_url: "https://api.stlouisfed.org"
    page_url: "https://fred.stlouisfed.org/series/EXPINF10YR"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://api.stlouisfed.org/fred/series/observations"
      method: "GET"
      requires_auth: true
      series_id: "EXPINF10YR"
      parameters:
        file_type: "json"
        limit: 1000
        sort_order: "desc"
    field_mappings:
      date: "date"
      value: "value"
      series_name: "10-Year Expected Inflation"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2025-12-10T00:00:00Z"
      override_approved: false
    metadata:
      created: "2025-12-10T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      requires_subscription: false
      notes: "Cleveland Fed 10-Year Expected Inflation (median)"
    rate_limit: 0.5
    auth_config:
      auth_type: "api_key"
      api_key_env: "FRED_API_KEY"
      api_key_param: "api_key"

  # University of Michigan Consumer Surveys
  - id: umich_consumer_surveys
    name: "University of Michigan - Consumer Surveys"
    base_url: "https://www.sca.isr.umich.edu"
    page_url: "https://www.sca.isr.umich.edu/tables.html"
    extraction_strategy: "csv_download"
    data_source:
      type: "csv_multi_file"
      urls:
        sentiment: "https://www.sca.isr.umich.edu/files/tbmics.csv"
        components: "https://www.sca.isr.umich.edu/files/tbmiccice.csv"
        inflation: "https://www.sca.isr.umich.edu/files/tbmpx1px5.csv"
      requires_auth: false
    field_mappings:
      sentiment: "Index of Consumer Sentiment"
      current_conditions: "Current Economic Conditions"
      consumer_expectations: "Consumer Expectations"
      year_ahead_inflation: "Year Ahead Inflation"
      long_run_inflation: "Long Run Inflation"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2025-12-10T00:00:00Z"
      override_approved: false
    metadata:
      created: "2025-12-10T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      requires_subscription: false
      notes: "5 fields from UMich Surveys: ICS_ALL, ICC, ICE, PX_MD, PX5_MD. Monthly data 1952-present."
    rate_limit: 2.0

  # DG ECFIN EU Business and Consumer Surveys
  - id: dg_ecfin_surveys
    name: "DG ECFIN - EU Business and Consumer Surveys"
    base_url: "https://ec.europa.eu/economy_finance/db_indicators/surveys"
    page_url: "https://ec.europa.eu/economy_finance/db_indicators/surveys/index_en.htm"
    extraction_strategy: "zip_excel_download"
    data_source:
      type: "zip_excel"
      zip_url: "https://ec.europa.eu/economy_finance/db_indicators/surveys/documents/series/nace2_ecfin_2511/main_indicators_sa_nace2.zip"
      excel_sheet: "MONTHLY"
      requires_auth: false
    field_mappings:
      esi_eu: "Economic Sentiment Indicator (EU)"
      esi_ea: "Economic Sentiment Indicator (Euro Area)"
      eei_eu: "Employment Expectations Indicator (EU)"
      eei_ea: "Employment Expectations Indicator (Euro Area)"
      flash_consumer_confidence_ea: "Flash Consumer Confidence (Euro Area)"
    robots_policy:
      status: "ALLOWED"
      last_checked: "2025-12-10T00:00:00Z"
      override_approved: false
    metadata:
      created: "2025-12-10T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      requires_subscription: false
      notes: "5 EU indicators from MONTHLY sheet. Data from 1985-present."
    rate_limit: 5.0

  # The Block - Exchange Volume (Browser-based with API fallback)
  - id: theblock_exchange_volume
    name: "The Block - BTC, ETH & SOL Combined (TOTAL3)"
    base_url: "https://www.theblock.co"
    page_url: "https://www.theblock.co/data/crypto-markets/spot/total-exchange-volume-daily"
    extraction_strategy: "api_json"
    data_source:
      type: "api"
      endpoint: "https://www.theblock.co/api/charts/chart/crypto-markets/spot/total-exchange-volume-daily"
      method: "GET"
      requires_auth: false
      headers: {}
    field_mappings:
      monthly_spot_volume: "Monthly Spot Volume"
      binance_spot_volume: "Binance Spot Volume"
      bybit_spot_volume: "Bybit Spot Volume"
      bitget_spot_volume: "Bitget Spot Volume"
      dex_monthly_volume: "DEX Monthly Volume"
      btc_volume: "BTC Volume"
      eth_volume: "ETH Volume"
      sol_volume: "SOL Volume"
    robots_policy:
      status: "UNKNOWN"
      last_checked: "2025-12-09T00:00:00Z"
      override_approved: false
    metadata:
      created: "2025-12-09T00:00:00Z"
      created_by: "manual"
      last_successful_extraction: null
      requires_subscription: false
      notes: "Daily exchange volume data including BTC, ETH, and SOL volumes, plus exchange-specific volumes (Binance, Bybit, Bitget) and DEX volume"
    rate_limit: 2.0

